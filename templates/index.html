<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Temp Mail Generator</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body {
font-family: 'Inter', sans-serif;
background: linear-gradient(135deg, #1e3a8a 0%, #7e22ce 100%);
min-height: 100vh;
}
.glass-effect {
background: rgba(255, 255, 255, 0.15);
backdrop-filter: blur(12px);
border: 1px solid rgba(255, 255, 255, 0.2);
}
.email-item {
transition: all 0.2s ease;
cursor: pointer;
}
.email-item:hover {
background: rgba(255, 255, 255, 0.2);
transform: translateY(-1px);
}
.email-item.active {
background: rgba(168, 85, 247, 0.3);
}
.email-body {
white-space: pre-wrap;
word-wrap: break-word;
}
#loader {
border: 3px solid rgba(255, 255, 255, 0.3);
border-top: 3px solid #fff;
border-radius: 50%;
width: 25px;
height: 25px;
animation: spin 1s linear infinite;
}
@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}
.fade-in {
animation: fadeIn 0.5s ease-in;
}
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}
.smooth-transition {
transition: all 0.3s ease;
}
@media (max-width: 768px) {
.mobile-stack { flex-direction: column; }
.mobile-full { width: 100%; }
.mobile-text-center { text-align: center; }
.mobile-inbox-container { flex-direction: column; height: auto; }
.mobile-inbox-list { height: 300px; min-height: 300px; max-height: 300px; }
.mobile-email-content { height: 400px; min-height: 400px; max-height: 400px; }
.mobile-scroll { -webkit-overflow-scrolling: touch; }
}
#login-screen {
display: flex;
justify-content: center;
align-items: center;
min-height: 100vh;
}
.login-box {
background: rgba(255, 255, 255, 0.15);
backdrop-filter: blur(12px);
border: 1px solid rgba(255, 255, 255, 0.2);
padding: 40px;
border-radius: 20px;
text-align: center;
max-width: 400px;
width: 100%;
}
.login-box input {
width: 100%;
padding: 15px;
margin-bottom: 20px;
background: rgba(0, 0, 0, 0.3);
border: 2px solid rgba(255, 255, 255, 0.2);
border-radius: 10px;
color: white;
font-size: 16px;
}
.login-box input::placeholder {
color: rgba(255, 255, 255, 0.5);
}
.login-box button {
width: 100%;
padding: 15px;
background: linear-gradient(135deg, #a855f7, #ec4899);
border: none;
border-radius: 10px;
color: white;
font-size: 16px;
font-weight: bold;
cursor: pointer;
}
.error {
color: #fca5a5;
margin-top: 10px;
font-size: 14px;
}
</style>
</head>
<body class="text-gray-100 min-h-screen p-2 md:p-4">

<div id="login-screen">
<div class="login-box">
<h1 class="text-3xl font-bold text-white mb-4">üîí Secure Login</h1>
<input type="password" id="password" placeholder="Enter password" />
<button id="login-btn">Login</button>
<p id="login-error" class="error" style="display:none;">‚ùå Invalid password</p>
</div>
</div>

<div id="main-app" style="display:none;">
<div class="h-fit mb-2">
<div class="bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white py-2 px-4 rounded-lg shadow-lg">
<marquee class="text-sm md:text-base font-medium">
‚ú® This website was created by <b class="text-yellow-300">Aung Myo Myat Zaw</b> with the help of DeepSeek AI ‚ú®
</marquee>
</div>
</div>
<div class="w-full max-w-6xl mx-auto">
<header class="text-center mb-4 md:mb-8 fade-in">
<div class="flex items-center justify-center mb-2 md:mb-4">
<i class="fas fa-envelope text-xl md:text-3xl text-white mr-2 md:mr-3"></i>
<h1 class="text-xl md:text-4xl lg:text-5xl font-bold text-white">Secure Temp Mail By AMMZ</h1>
</div>
<p class="text-gray-300 text-sm md:text-lg font-medium mobile-text-center">Disposable email addresses that auto-delete in 1 hour</p>
</header>
<main class="glass-effect rounded-2xl shadow-2xl p-3 md:p-6 lg:p-8 w-full fade-in">
<div class="mb-4 md:mb-8 text-center">
<button id="big-random-btn" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 md:py-4 px-6 md:px-8 rounded-2xl transition-all transform hover:scale-105 shadow-lg text-base md:text-xl w-full max-w-md mx-auto flex items-center justify-center">
<i class="fas fa-random mr-2 md:mr-3 text-lg md:text-xl"></i>
Generate Random Email
</button>
<p class="text-gray-300 text-xs md:text-sm mt-2 font-medium">One click to create a random email instantly</p>
</div>
<div class="mb-4 md:mb-8">
<div class="flex flex-col md:flex-row items-center gap-2 md:gap-4 mb-3 md:mb-6 mobile-stack">
<div class="flex-1 flex gap-2 md:gap-3 mobile-stack mobile-full">
<div class="flex-1 relative mobile-full">
<input type="text" id="username-input" placeholder="Enter username"
class="w-full h-10 md:h-14 bg-gray-900 border-2 border-gray-700 text-white rounded-xl px-3 md:px-4 py-2 md:py-3 text-sm md:text-lg focus:outline-none focus:border-blue-500 transition-colors">
</div>
<div class="w-full md:w-48 mobile-full">
<select id="domain-select" class="w-full h-10 md:h-14 bg-gray-900 border-2 border-gray-700 text-white rounded-xl px-3 md:px-6 py-2 md:py-3 text-sm md:text-lg focus:outline-none focus:border-blue-500 transition-colors">
<option value="">Select domain</option>
</select>
</div>
</div>
<div class="flex gap-2 md:gap-3 w-full md:w-auto justify-center mobile-stack mobile-full">
<button id="create-btn" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-2 md:py-3 px-3 md:px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg flex-1 md:flex-none mobile-full text-sm md:text-base">
<i class="fas fa-plus mr-1 md:mr-2"></i>Create
</button>
<button id="copy-btn" class="bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white font-semibold py-2 md:py-3 px-3 md:px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg flex-1 md:flex-none mobile-full text-sm md:text-base">
<i class="fas fa-copy mr-1 md:mr-2"></i>Copy
</button>
</div>
</div>
<div id="email-display" class="hidden text-center p-2 md:p-4 bg-gray-900 rounded-xl mb-2 md:mb-4 border border-gray-700">
<div class="flex flex-col md:flex-row items-center justify-between">
<div class="flex items-center mb-2 md:mb-0">
<i class="fas fa-envelope text-blue-400 mr-2 text-sm md:text-xl"></i>
<span id="current-email" class="text-white font-mono text-xs md:text-lg font-semibold break-all"></span>
</div>
</div>
</div>
</div>
<div id="notification" class="hidden text-center mb-2 md:mb-4 p-2 md:p-4 rounded-xl text-white font-medium text-sm md:text-base">
<i class="fas fa-check-circle mr-2"></i>
<span id="notification-text"></span>
</div>
<div class="flex flex-col md:flex-row gap-3 md:gap-6 mobile-inbox-container">
<div class="w-full md:w-2/5 glass-effect rounded-xl p-2 md:p-4 overflow-y-auto mobile-full mobile-inbox-list mobile-scroll">
<div class="flex justify-between items-center mb-2 md:mb-4">
<h2 class="text-base md:text-xl font-semibold text-white">
<i class="fas fa-inbox mr-1 md:mr-2"></i>Inbox
</h2>
<div class="flex items-center gap-2">
<span id="email-count" class="text-xs text-gray-300 font-medium">0 emails</span>
<button id="refresh-btn" class="p-1 md:p-2 rounded-full hover:bg-gray-700 transition-colors text-white smooth-transition">
<i class="fas fa-sync-alt text-xs md:text-base"></i>
</button>
</div>
</div>
<div id="email-list-container" class="h-full overflow-y-auto smooth-transition">
<div id="no-emails-default" class="text-center py-6 md:py-10 text-gray-300 flex flex-col items-center justify-center">
<i class="fas fa-envelope-open text-2xl md:text-4xl mb-2 opacity-60"></i>
<p class="text-sm md:text-lg font-medium">No emails yet</p>
<p class="text-xs mt-1 font-medium">Your inbox is ready for messages</p>
</div>
<div id="inbox-loader" style="display:none;" class="flex justify-center items-center py-6 md:py-10">
<div id="loader"></div>
</div>
<div id="email-list"></div>
</div>
</div>
<div id="email-content-container" class="w-full md:w-3/5 glass-effect rounded-xl p-3 md:p-6 overflow-y-auto mobile-full mobile-email-content mobile-scroll">
<div id="email-placeholder" class="flex flex-col items-center justify-center h-full text-gray-300 py-6 md:py-0">
<i class="fas fa-envelope-open text-3xl md:text-6xl mb-2 md:mb-4 opacity-60"></i>
<p class="text-base md:text-xl font-medium mobile-text-center">Select an email to read</p>
<p class="text-xs md:text-sm mt-1 text-center font-medium">Choose a message from your inbox</p>
</div>
<div id="email-content" class="hidden h-full flex flex-col email-content-wrapper">
<div class="flex flex-col md:flex-row justify-between items-start mb-3 md:mb-6">
<h2 id="email-subject" class="text-lg md:text-2xl font-bold text-white mb-1 md:mb-0 break-words"></h2>
<span id="email-date" class="text-xs text-gray-300 bg-gray-800 px-2 py-1 rounded-lg font-medium self-start md:self-auto mt-1 md:mt-0"></span>
</div>
<div class="flex items-center text-xs md:text-sm text-gray-300 mb-3 md:mb-6 border-b border-gray-700 pb-2 md:pb-4">
<strong class="mr-2 text-white font-semibold"><i class="fas fa-user mr-1"></i>From:</strong>
<span id="email-from" class="font-mono font-medium break-all"></span>
</div>
<div id="email-body" class="text-gray-200 leading-relaxed email-body bg-gray-900 p-3 md:p-6 rounded-lg font-medium text-xs md:text-base overflow-auto flex-1"></div>
</div>
</div>
</div>
</main>
<footer class="text-center mt-4 md:mt-8 text-gray-300 text-xs md:text-sm font-medium mobile-text-center">
<p>Emails automatically delete after 1 hour or when you end the session</p>
<p class="mt-1">Your privacy is our priority - all data is deleted when session ends</p>
</footer>
</div>
<div class="h-fit mt-2 md:mt-4">
<div class="bg-gradient-to-r from-green-600 via-teal-600 to-blue-600 text-white py-2 px-4 rounded-lg shadow-lg border border-green-400">
<marquee class="text-xs md:text-base font-medium">
üîí Secure & Private ‚Ä¢ All Rights Reserved by <b class="text-yellow-300">AMMZ</b> ‚Ä¢ Built with Advanced AI Technology üöÄ
</marquee>
</div>
</div>
</div>

<script>
var API_URL = window.location.origin;
var currentEmail = '';
var autoRefreshInterval = null;

document.getElementById('login-btn').addEventListener('click', login);
document.getElementById('password').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') login();
});

function login() {
    var password = document.getElementById('password').value;
    var errorEl = document.getElementById('login-error');
    
    fetch(API_URL + '/api/login', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({password: password})
    })
    .then(function(res) { return res.json(); })
    .then(function(data) {
        if (data.success) {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            loadDomains();
        } else {
            errorEl.style.display = 'block';
            setTimeout(function() { errorEl.style.display = 'none'; }, 3000);
        }
    })
    .catch(function(error) {
        alert('Connection error. Please try again.');
    });
}

function loadDomains() {
    fetch(API_URL + '/api/domains')
    .then(function(res) { return res.json(); })
    .then(function(data) {
        var select = document.getElementById('domain-select');
        select.innerHTML = '<option value="">Select domain</option>';
        data.domains.forEach(function(d) {
            select.innerHTML += '<option value="' + d + '">' + d + '</option>';
        });
    })
    .catch(function(error) {
        console.error('Error loading domains');
    });
}

document.getElementById('big-random-btn').addEventListener('click', function() {
    document.getElementById('username-input').value = '';
    createEmail('');
});

document.getElementById('create-btn').addEventListener('click', function() {
    var username = document.getElementById('username-input').value.trim();
    createEmail(username);
});

function createEmail(customName) {
    var btn = customName ? document.getElementById('create-btn') : document.getElementById('big-random-btn');
    var originalText = btn.innerHTML;
    btn.disabled = true;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Creating...';
    
    fetch(API_URL + '/api/create', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({name: customName})
    })
    .then(function(res) {
        if (!res.ok) throw new Error('HTTP ' + res.status);
        return res.json();
    })
    .then(function(data) {
        if (!data.email) throw new Error('No email in response');
        
        currentEmail = data.email;
        var parts = data.email.split('@');
        
        document.getElementById('username-input').value = parts[0];
        document.getElementById('domain-select').value = parts[1];
        document.getElementById('current-email').textContent = data.email;
        document.getElementById('email-display').classList.remove('hidden');
        
        showNotification('Email created: ' + parts[0], 'success');
        loadEmails();
        startAutoRefresh();
    })
    .catch(function(error) {
        showNotification('Error: ' + error.message, 'error');
    })
    .finally(function() {
        btn.disabled = false;
        btn.innerHTML = originalText;
    });
}

document.getElementById('copy-btn').addEventListener('click', function() {
    var username = document.getElementById('username-input').value.trim();
    var domain = document.getElementById('domain-select').value;
    
    if (!username || !domain) {
        showNotification('Create an email first!', 'error');
        return;
    }
    
    var email = username + '@' + domain;
    navigator.clipboard.writeText(email);
    showNotification('Copied: ' + email, 'success');
});

document.getElementById('refresh-btn').addEventListener('click', loadEmails);

function loadEmails() {
    var username = document.getElementById('username-input').value.trim();
    var domain = document.getElementById('domain-select').value;
    
    if (!username || !domain) {
        showNotification('Enter a username first!', 'error');
        return;
    }
    
    currentEmail = username + '@' + domain;
    
    var loader = document.getElementById('inbox-loader');
    var list = document.getElementById('email-list');
    var defaultMsg = document.getElementById('no-emails-default');
    
    loader.style.display = 'flex';
    defaultMsg.style.display = 'none';
    
    fetch(API_URL + '/api/emails/' + encodeURIComponent(currentEmail))
    .then(function(res) { return res.json(); })
    .then(function(data) {
        document.getElementById('email-count').textContent = data.emails.length + ' email' + (data.emails.length !== 1 ? 's' : '');
        
        list.innerHTML = '';
        
        if (data.emails.length === 0) {
            list.innerHTML = '<div class="text-center py-6 md:py-10 text-gray-300 flex flex-col items-center justify-center"><i class="fas fa-envelope-open text-2xl md:text-4xl mb-2 opacity-60"></i><p class="text-sm md:text-lg font-medium">No emails yet</p><p class="text-xs mt-1 font-medium">Your inbox is ready for messages</p></div>';
        } else {
            data.emails.forEach(function(email, idx) {
                var item = document.createElement('div');
                item.className = 'email-item bg-gray-800 p-3 rounded-lg mb-2 border border-gray-700';
                item.innerHTML = '<div class="flex justify-between items-start mb-1"><span class="text-sm font-semibold text-white truncate">' + escapeHtml(email.sender) + '</span><span class="text-xs text-gray-400">' + formatTime(email.timestamp) + '</span></div><div class="text-sm font-medium text-gray-200 mb-1">' + escapeHtml(email.subject) + '</div><div class="text-xs text-gray-400 truncate">' + escapeHtml(email.body).substring(0, 60) + '...</div>';
                item.addEventListener('click', function() { viewEmail(email, item); });
                list.appendChild(item);
            });
        }
    })
    .catch(function(error) {
        showNotification('Error loading emails', 'error');
    })
    .finally(function() {
        loader.style.display = 'none';
    });
}

function viewEmail(email, itemEl) {
    var items = document.querySelectorAll('.email-item');
    items.forEach(function(el) { el.classList.remove('active'); });
    itemEl.classList.add('active');
    
    document.getElementById('email-placeholder').style.display = 'none';
    document.getElementById('email-content').classList.remove('hidden');
    
    document.getElementById('email-subject').textContent = email.subject;
    document.getElementById('email-from').textContent = email.sender;
    document.getElementById('email-date').textContent = formatTime(email.timestamp);
    document.getElementById('email-body').textContent = email.body;
}

function startAutoRefresh() {
    if (autoRefreshInterval) clearInterval(autoRefreshInterval);
    autoRefreshInterval = setInterval(loadEmails, 15000);
}

function showNotification(message, type) {
    var notif = document.getElementById('notification');
    var text = document.getElementById('notification-text');
    
    text.textContent = message;
    notif.className = type === 'success' ? 
        'text-center mb-2 md:mb-4 p-2 md:p-4 rounded-xl text-white font-medium text-sm md:text-base bg-green-600' :
        'text-center mb-2 md:mb-4 p-2 md:p-4 rounded-xl text-white font-medium text-sm md:text-base bg-red-600';
    notif.classList.remove('hidden');
    
    setTimeout(function() { notif.classList.add('hidden'); }, 3000);
}

function escapeHtml(text) {
    var div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

function formatTime(timestamp) {
    var date = new Date(timestamp);
    var now = new Date();
    var diff = now - date;
    var minutes = Math.floor(diff / 60000);
    
    if (minutes < 1) return 'Just now';
    if (minutes < 60) return minutes + 'm ago';
    if (minutes < 1440) return Math.floor(minutes / 60) + 'h ago';
    return date.toLocaleString();
}
</script>
</body>
</html>
